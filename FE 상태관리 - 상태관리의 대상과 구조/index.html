<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f67bec7c738f14038f97.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box;font:112.5%/1.45em georgia,serif,sans-serif;overflow-y:scroll}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;word-wrap:break-word;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:Noto Sans KR,sans-serif;font-kerning:normal;margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{text-rendering:optimizeLegibility;color:inherit;font-family:Andale Mono,Ubuntu Mono,Fira Code,Consolas,Monaco;font-size:2.25rem;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none;margin:0 0 1.45rem;max-width:100%;padding:0}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Andale Mono,Ubuntu Mono,Fira Code,Consolas,Monaco;font-size:1em}figure{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;box-sizing:content-box;height:1px;margin-left:0;margin-right:0;margin-top:0;overflow:visible;padding:0}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 0 1.45rem;padding:0}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}*,:after,:before{box-sizing:inherit}h2{font-size:1.62671rem}h2,h3{text-rendering:optimizeLegibility;color:inherit;font-family:Andale Mono,Ubuntu Mono,Fira Code,Consolas,Monaco;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0}h3{font-size:1.38316rem}h4{font-size:1rem}h4,h5{text-rendering:optimizeLegibility;color:inherit;font-family:Andale Mono,Ubuntu Mono,Fira Code,Consolas,Monaco;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0}h5{font-size:.85028rem}h6{text-rendering:optimizeLegibility;color:inherit;font-family:Andale Mono,Ubuntu Mono,Fira Code,Consolas,Monaco;font-size:.78405rem;font-weight:700;line-height:1.1}h6,hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 10px 1.45rem;padding:0}dd,dl{margin:0 0 1.45rem}dd,dl,p{padding:0}p{margin:0 0 5px}pre{word-wrap:normal;background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;overflow:auto;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;padding:0;width:100%}blockquote{margin:0 1.45rem 1.45rem;padding:0}address,form,iframe,noscript{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.3625rem;margin-left:1.45rem;margin-top:.3625rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}td,th,thead{text-align:left}td,th{font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:Fira Code;font-size:.95em;line-height:1.6;padding:.1em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:"";letter-spacing:-.5em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}body{font-size:16px;font-weight:400;line-height:26px}</style><meta name="generator" content="Gatsby 3.14.5"/><link rel="canonical" href="https://ingong.github.io/FE%20상태관리%20-%20상태관리의%20대상과%20구조/" data-baseprotocol="https:" data-basehost="ingong.github.io"/><title data-react-helmet="true">FE 상태관리 - 상태관리의 대상과 구조</title><meta data-react-helmet="true" name="description" content="부스트캠프 Web23팀 프로젝트인 협업은 애자일 방법론으로 프로젝트를 진행할 때 발생하는 이슈(에픽, 스토리, 테스크) 를 관리하기 위한 협업툴이다. 우리는 상태 관리의 복잡도를 낮추고, 좋은 UX 를 제공하자는 목표를 세웠다. 이번 글에서는 상태 관리에 대한 우리의 고민을 작성해보려 한다"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="FE 상태관리 - 상태관리의 대상과 구조"/><meta data-react-helmet="true" property="og:description" content="부스트캠프 Web23팀 프로젝트인 협업은 애자일 방법론으로 프로젝트를 진행할 때 발생하는 이슈(에픽, 스토리, 테스크) 를 관리하기 위한 협업툴이다. 우리는 상태 관리의 복잡도를 낮추고, 좋은 UX 를 제공하자는 목표를 세웠다. 이번 글에서는 상태 관리에 대한 우리의 고민을 작성해보려 한다"/><meta data-react-helmet="true" property="og:image" content="/static/d7f738a87cd2e8d6afe7a9806f704187/test.png"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="FE 상태관리 - 상태관리의 대상과 구조"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="FE 상태관리 - 상태관리의 대상과 구조"/><meta data-react-helmet="true" name="twitter:description" content="부스트캠프 Web23팀 프로젝트인 협업은 애자일 방법론으로 프로젝트를 진행할 때 발생하는 이슈(에픽, 스토리, 테스크) 를 관리하기 위한 협업툴이다. 우리는 상태 관리의 복잡도를 낮추고, 좋은 UX 를 제공하자는 목표를 세웠다. 이번 글에서는 상태 관리에 대한 우리의 고민을 작성해보려 한다"/><meta data-react-helmet="true" name="twitter:image" content="/static/d7f738a87cd2e8d6afe7a9806f704187/test.png"/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{all:inherit;bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-a472468bfd087f46b409.js"/><link as="script" rel="preload" href="/framework-c2b204fb0e5f9042ac72.js"/><link as="script" rel="preload" href="/app-9c7d149768bc8ad71338.js"/><link as="script" rel="preload" href="/d7eeaac4-aa263a3b5e61159c2bcc.js"/><link as="script" rel="preload" href="/b3d8d0cdd4e5e4b5c79c1f0d1fe0dbd25c6dbbd7-953ff3fbff6884a46f6e.js"/><link as="script" rel="preload" href="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-8c6d3173ed80ffc13f91.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-tsx-56e8481dbbd61d01e505.js"/><link as="fetch" rel="preload" href="/page-data/FE 상태관리 - 상태관리의 대상과 구조/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global 1nz5k4t">*{padding:0;margin:0;box-sizing:border-box;font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-size:16px;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}p,ol,h1,h2,h3,ul,li,span,div{word-break:keep-all;}</style><style data-emotion="css wigqyx">.css-wigqyx{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:210px;margin-bottom:60px;}@media (max-width: 768px){.css-wigqyx{height:200px;}}</style><div class="css-wigqyx e1opi4mu0"><style data-emotion="css 1u7ncg7">.css-1u7ncg7{width:100%;background-image:linear-gradient(60deg, #29323c 0%, #485563 100%);color:#ffffff;}</style><div class="css-1u7ncg7 e160b012"><style data-emotion="css f1hmfi">.css-f1hmfi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:768px;height:70px;margin:0 auto;}@media (max-width: 768px){.css-f1hmfi{width:100%;height:70px;padding:0 20px;}}</style><div class="css-f1hmfi e160b011"><a href="/"><style data-emotion="css wddouk">.css-wddouk{margin-top:5px;font-size:24px;font-weight:700;}@media (max-width: 768px){.css-wddouk{font-size:24px;}}</style><div class="css-wddouk e160b010">이인송 블로그</div></a><a href="https://www.github.com/ingong"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a></div></div><style data-emotion="css xk6tej">.css-xk6tej{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:637px;height:100%;margin:0 auto;padding:60px 0;color:#000;word-break:break-all;}@media (max-width: 768px){.css-xk6tej{width:100%;padding:40px 20px;}}</style><div class="css-xk6tej e1st1jau2"><style data-emotion="css v4n1bt">.css-v4n1bt{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:42px;font-weight:800;word-break:break-all;word-wrap:normal;}@media (max-width: 768px){.css-v4n1bt{font-size:30px;}}</style><div class="css-v4n1bt e1st1jau1">FE 상태관리 - 상태관리의 대상과 구조</div><style data-emotion="css scdjut">.css-scdjut{position:absolute;right:0;bottom:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:15px;font-weight:400;color:#7d7d7d;font-style:italic;}@media (max-width: 768px){.css-scdjut{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-scdjut e1st1jau0">December 7,2021</div></div></div><style data-emotion="css rqgxrz">.css-rqgxrz{font-family:'Noto Sans KR',sans-serif;font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:637px;margin:0 auto;word-break:break-all;line-height:26px;font-size:16px;font-weight:400;}.css-rqgxrz h2{font-weight:800;margin-top:50px;margin-bottom:10px;font-size:26px;}.css-rqgxrz h3{font-weight:700;margin-top:30px;margin-bottom:8px;font-size:23px;}.css-rqgxrz h4{font-weight:600;margin-top:20px;margin-bottom:8px;font-size:20px;}.css-rqgxrz img{margin-top:15px;}.css-rqgxrz blockquote{margin:15px 0;padding:5px 5px;border-left:2px solid #000000;font-weight:800;line-height:26px;font-size:16px;font-weight:500;}.css-rqgxrz ol,.css-rqgxrz ul{line-height:26px;font-size:16px;font-weight:500;}.css-rqgxrz li{line-height:26px;margin:0;padding:2px;line-height:26px;font-size:16px;font-weight:550;}.css-rqgxrz p{font-weight:550;font-size:16px;line-height:26px;padding:5px 0;text-align:justify;text-indent:8px;}.css-rqgxrz hr{border:1px solid #000000;line-height:26px;font-size:16px;font-weight:500;}.css-rqgxrz a{-webkit-text-decoration:none;text-decoration:none;line-height:26px;font-size:16px;font-weight:500;}.css-rqgxrz pre[class*='language-']{margin:0 auto;font-size:15px;}.css-rqgxrz pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-rqgxrz code[class*='language-']{tab-size:2;line-height:16px;text-align:center;font-size:16px;font-weight:400;margin:0 auto;font-family:'Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace';}.css-rqgxrz pre[class*='language-']{tab-size:2;line-height:16px;font-size:14px;font-weight:400;margin:0 auto;margin-bottom:20px;border-radius:8px;}@media (max-width: 768px){.css-rqgxrz{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-rqgxrz h1{font-size:23px;}.css-rqgxrz h2{font-size:20px;}.css-rqgxrz h3{font-size:17px;}.css-rqgxrz img{width:100%;}.css-rqgxrz hr{margin:10px 0;}}</style><div class="css-rqgxrz e1ijh0y10"><h3>TL;DR</h3>
<ul>
<li>부스트캠프 Web23팀 프로젝트인 협업은 애자일 방법론으로 프로젝트를 진행할 때 발생하는 이슈(에픽, 스토리, 테스크) 를 관리하기 위한 협업툴이다.</li>
<li>상태 관리의 대상에 대한 고민을 통해 에픽, 스토리, 테스크 중 테스크를 제외했다.</li>
<li>기존 상태 관리의 구조였던 중첩 구조를 분리했다.</li>
</ul>
<h2>우리 팀의 고민</h2>
<p>부스트캠프의 그룹 프로젝트를 하면서 가장 신경 썼던 있는 부분은 우리가 하고 있는 학습에 대한 과정을 기록하는 것이다. 고민과 해결에 대한 내용을 기록하면서 우리의 사고 과정을 기록하고, 우리의 의견을 명확한 힘을 가지게 된다고 생각했다.</p>
<p>이번 주에 마무리한 HyupUp 은 애자일 방법론으로 프로젝트를 진행할 때 발생하는 이슈 관리를 위한 협업 툴이다. 사용자는 하나의 조직에 가입할 수 있으며, 그 조직에는 여러 개의 프로젝트가 존재하는 구조이다. 프로젝트에는 에픽, 스토리, 테스크의 순서로 계층구조를 이루는 상태가 존재한다. 사용자는 프로젝트를 만들고, 해당 프로젝트에 에픽을 추가할 수 있다. 또한 스토리를 추가한 다음 어떤 에픽에 포함되게 할지 드롭다운을 통해 선택할 수 있다. 스토리 모달에서는 테스크를 추가하고 테스크를 팀원에게 할당시킬 수 있다. 그리고 마지막으로 이 3가지 기능이 모두 다른 사용자들에게 실시간으로 반영되는 기능을 목표로 세웠다.</p>
<p>우리는 위 기능들을 구현하기 전에, 복잡해보이는 3가지 데이터(에픽, 스토리, 테스크)를 어떻게 잘 관리할지에 대한 고민을 시작했다. 먼저 ‘3가지 데이터를 모두 프론트엔드에서 상태로 관리해야하는가?’ 에 대한 주제로 의견을 나눴다. 실시간으로 반영되기 위해서는 상태로 관리해야한다는 의견이 있었다. 반대로 테스크는 데이터 양이 크고 복잡도를 키울 수 있어 제외하자는 의견도 있었다.</p>
<h2>상태 관리의 대상</h2>
<p>논의 끝에 우리는 테스크를 상태에서 제외하기로 결정했다. 크게 2가지 이유를 도출했다.</p>
<p>첫 번재는 관리하기가 번거롭고, 동기화의 필요성이 낮았기 때문이다. 우리 서비스의 페이지는 크게 홈페이지(개인이 테스크를 관리), 프로젝트 페이지(프로젝트 전체에 대한 이슈 관리, 테스트도 포함) 로 구성되어있다. 만약 상태관리를 한다면 한 페이지 내에서의 변화를 다른 페이지에서도 즉각 반영해야했다. 프로젝트를 진행할 때, 테스크와 같은 작은 단위의 이슈를 실시간으로 반영해야할 필요는 없어보였다. 테스크의 상태들에 기반하여 스토리가 변하지도 않았고, 프로젝트 페이지에서는 스토리 아이템을 클릭해야 테스크가 보였기 때문에 굳이..? 라는 생각을 가지게 되었다. 따라서 우리는 테스크를 상태관리의 대상에서 제외시키는 첫 번째 이유를 도출했다.</p>
<p>두 번째는 테스크 관리의 성격이 SPA 에 적합하지 않았다. SPA 는 웹사이트의 전체 페이지를 나의 페이지에 담아 동적으로 화면을 바꿔가면서 표현한다. 즉, User 의 액션에 따라서 필요한 데이터를 업데이트해서 사용자에게 보여주는 상황에 적합한 어플리케이션이다. 하지만 Task 의 경우에는 사용자의 동작에 따라 다른 상태를 보여주지 않고, 기존에 있는 Task 를 보여주는 경우가 더 많다. 오히려 상태로 갖고 있기 보다는 캐싱을 통해 반복되는 API 호출을 효율적으로 관리하는 편이 낫다고 생각했다.</p>
<p>우리는 다음 2가지의 이유로 Task 를 상태관리의 대상에서 제외시켰다. 사용자의 Task 를 한 번에 보여주는 메인페이지에 대해서는 오히려 서버 사이드 렌더링을 도입도 고려해볼만하다고 생각했다. 하지만 테스크의 상위 개념인 스토리와 에픽의 경우는 상태로 관리해야했고, 우리의 개발 리소스는 한정적이였기 때문에 상태관리의 대상에서 제외시키는 선택으로 만족했다.</p>
<h2>상태 관리 구조</h2>
<h3>초기 상태 관리 구조</h3>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>
	<span class="token string">"project"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		  <span class="token string">"epics"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"stories"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">"anoterEpics"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"stories"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">"anotherproject"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		  <span class="token string">"epics"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"stories"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">"anoterEpics"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"stories"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>에픽 → 스토리 → 태스크의 위계구조를 가지는 구조이기 때문에 에픽 안에 스토리가 있고, 스토리 안에 태스크가 들어가 있는 중첩된 자료구조를 가질 수도 있다. 또한 에픽, 스토리, 태스크를 따로 따로 가지고 있을 수도 있다. 지금보면 정말 말도 안되는 구조이지만, 그 당시에는 치열하게 고민해서 도출해낸 결과이다.</p>
<h3>개선한 상태 관리 구조</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">## Epic
<span class="token punctuation">{</span>
	<span class="token string">"project"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>epics<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>anotherEpics<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"anotherProject"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>epics<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>anotherEpics<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

## Story
<span class="token punctuation">{</span>
	<span class="token string">"project"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>story<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>otherstory<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"anotherproject"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>story<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>otherstory<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

## Task
<span class="token punctuation">{</span>
	<span class="token string">"project"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>task<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>othertask<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"anotherproject"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>task<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>othertask<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>projectId 를 키로 가지고 있고 배열로 관리해야했기 때문에 하나의 상태(에픽, 스토리 또는 테스크) 를 수정하려고 한다면 이 배열들을 전부 수정해야만 했다. 또한 여전히 depth 가 2이기 때문에 복잡해보였다. 상태를 추가하고, 수정하고, 삭제하는게 어려워보였다. 따라서 조금 더 나은 상태 구조에 대한 고민이 필요했다.</p>
<h3>최종 상태 관리 구조</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">## EpicList
<span class="token keyword">const</span> epicList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> epic <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> epic <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> epic <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> epic <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> epic <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


## StoryList
<span class="token keyword">const</span> storyList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> story <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>


## Epic
<span class="token keyword">type</span> <span class="token class-name">EpicType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  projectId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  startAt<span class="token operator">:</span> Date<span class="token punctuation">;</span>
  endAt<span class="token operator">:</span> Date<span class="token punctuation">;</span>
  order<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


## Story
<span class="token keyword">type</span> <span class="token class-name">StoryType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  projectId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  epicId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  status<span class="token operator">:</span> StoryStatusType<span class="token punctuation">;</span>
  order<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>최종으로 결정한 상태 관리구조이다. 에픽 배열을 따로, 스토리 배열을 따로 관리하기로 하였다. 우리가 계층 구조를 고민한 이유가 상위 상태가 하위 상태의 변화에 따라 변화할 필요가 있기 때문이였다. 배열로 상태 관리 구조를 변경하면서 각각 개별 상태에 상위 상태에 대한 id 를 부여하기로 했다.</p>
<h2>마무리</h2>
<p>6주간 우리는 이 상태를 씹고, 뜯고, 맛 보았다. 우리 프로젝트의 목표는 실시간 상태 관리였다. 한 사용자의 상태 변화가 다른 사용자가 새로고침하지 않아도 실시간으로 반영되게 하였고, 소켓과 API 를 적절히 활용해서 구현할 수 있었다. 실시간으로 상태를 반영하다보니, 불필요한 상태가 함께 자주 변경된다면 사용자 입장에서도 불편함을 느낄 수 있을 것이라고 생각했다. 이 고민들을 해결하기 위해 상태 관리의 대상과 구조를 고민했고 해결했다. 우리의 선택에 대한 근거를 제시하자는 목표로 논의를 시작했는데, 문제도 해결하고 근거도 만들 수 있었던 과정이였다.</p></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">©ingong, Built with Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/FE 상태관리 - 상태관리의 대상과 구조/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-ea100fe6f02bbc648246.js"],"app":["/app-9c7d149768bc8ad71338.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-bf5b311ea3406bb4ce3c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-708844d7b493af0f2f0d.js"],"component---src-pages-info-tsx":["/component---src-pages-info-tsx-149e2d85646558e1938c.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-6cd0c3197cacf3b5aa63.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-3c63f260f14049359130.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-56e8481dbbd61d01e505.js"]};/*]]>*/</script><script src="/polyfill-ea100fe6f02bbc648246.js" nomodule=""></script><script src="/component---src-templates-post-template-tsx-56e8481dbbd61d01e505.js" async=""></script><script src="/d0dcf9c1039535d44ee74defc829dfbf62dac3c5-8c6d3173ed80ffc13f91.js" async=""></script><script src="/b3d8d0cdd4e5e4b5c79c1f0d1fe0dbd25c6dbbd7-953ff3fbff6884a46f6e.js" async=""></script><script src="/d7eeaac4-aa263a3b5e61159c2bcc.js" async=""></script><script src="/app-9c7d149768bc8ad71338.js" async=""></script><script src="/framework-c2b204fb0e5f9042ac72.js" async=""></script><script src="/webpack-runtime-a472468bfd087f46b409.js" async=""></script></body></html>